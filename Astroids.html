<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asteroids Game</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000000;
            color: #fff;
            font-family: 'Arial', sans-serif;
        }

        canvas {
            border: 2px solid #ff0000;
        }

        h1 {
            text-align: center;
            font-size: 2em;
            margin-bottom: 20px;
        }

        p {
            text-align: center;
            font-size: 1.2em;
        }
    </style>
</head>
<body>

    <h1></h1>
    
    <canvas id="gameCanvas" width="850" height="650"></canvas>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const canvas = document.getElementById("gameCanvas");
            const ctx = canvas.getContext("2d");

            // Instellingen voor de driehoek
            let triangleX = 375;
            let triangleY = 275;
            let triangleSize = 50;  // Grootte van de driehoek
            let rotationAngle = Math.PI;  // InitiÃ«le rotatie 180 graden in radialen
            let speed = 2;  // Snelheid van de beweging

            // Bijhouden welke toetsen zijn ingedrukt
            const keys = {
                a: false,
                d: false,
                w: false,
                s: false,
            };

            // Kogelinstellingen
            const bullets = [];
            const bulletSpeed = -5;

            // Functie om de driehoek te tekenen
            function drawTriangle(x, y, size, angle) {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.save(); // Slaat de huidige staat van het canvas op

                // Translate naar het midden van de driehoek
                const centerX = x + size / 2;
                const centerY = y + size / 2;

                ctx.translate(centerX, centerY);
                ctx.rotate(angle); // Roteert de driehoek
                ctx.translate(-centerX, -centerY);

                ctx.beginPath();
                ctx.moveTo(x, y);
                ctx.lineTo(x + size, y);
                ctx.lineTo(x + size / 2, y + size);
                ctx.closePath();

                ctx.fillStyle = "white";
                ctx.fill();

                ctx.restore(); // Herstelt de vorige staat van het canvas
            }

            // Functie om kogels te tekenen
            function drawBullets() {
                ctx.fillStyle = "white";
                for (const bullet of bullets) {
                    ctx.beginPath();
                    ctx.arc(bullet.x, bullet.y, 3, 0, 2 * Math.PI);
                    ctx.fill();
                }
            }

            // Functie om de beweging van de driehoek bij te werken op basis van de toetsenstatus
            function updateTriangle() {
                const rotationSpeed = 0.025; // Snelheid van de rotatie

                // Pas de rotatie aan op basis van de ingedrukte toetsen
                if (keys.a) {
                    rotationAngle -= rotationSpeed;
                }
                if (keys.d) {
                    rotationAngle += rotationSpeed;
                }

                let moveX = 0;
                let moveY = 0;

                if (keys.w) {
                    moveX = -speed * Math.sin(rotationAngle);
                    moveY = speed * Math.cos(rotationAngle);
                }

                if (keys.s) {
                    moveX = speed * Math.sin(rotationAngle);
                    moveY = -speed * Math.cos(rotationAngle);
                }

                const newX = triangleX + moveX;
                const newY = triangleY + moveY;

                if (
                    newX > 0 &&
                    newY > 0 &&
                    newX + triangleSize < canvas.width &&
                    newY + triangleSize < canvas.height
                ) {
                    triangleX = newX;
                    triangleY = newY;
                }

                // Teken de driehoek
                drawTriangle(triangleX, triangleY, triangleSize, rotationAngle);

                // Update kogelposities
                for (const bullet of bullets) {
                    bullet.x += bulletSpeed * Math.sin(bullet.angle);
                    bullet.y -= bulletSpeed * Math.cos(bullet.angle);
                }

                // Verwijder kogels die buiten het canvas zijn
                bullets.forEach((bullet, index) => {
                    if (
                        bullet.x < 0 ||
                        bullet.y < 0 ||
                        bullet.x > canvas.width ||
                        bullet.y > canvas.height
                    ) {
                        bullets.splice(index, 1);
                    }
                });

                // Teken kogels
                drawBullets();

                // Herhaal de functie bij de volgende frame
                requestAnimationFrame(updateTriangle);
            }

            // Voeg event listeners toe om de toetsenstatus bij te werken
            document.addEventListener("keydown", function (event) {
                switch (event.key) {
                    case "a":
                        keys.a = true;
                        break;
                    case "d":
                        keys.d = true;
                        break;
                    case "w":
                        keys.w = true;
                        break;
                    case "s":
                        keys.s = true;
                        break;
                }
            });

            document.addEventListener("keyup", function (event) {
                switch (event.key) {
                    case "a":
                        keys.a = false;
                        break;
                    case "d":
                        keys.d = false;
                        break;
                    case "w":
                        keys.w = false;
                        break;
                    case "s":
                        keys.s = false;
                        break;
                    case " ":
                        // Voeg een kogel toe aan de kogels-array
                        bullets.push({
                            x: triangleX + triangleSize / 2,
                            y: triangleY + triangleSize / 2,
                            angle: rotationAngle,
                        });
                        break;
                }
            });

            // Start de bewegingsupdate
            updateTriangle();
        });
    </script>
</body>
</html>
